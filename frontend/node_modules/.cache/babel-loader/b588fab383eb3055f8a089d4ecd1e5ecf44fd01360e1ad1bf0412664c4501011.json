{"ast":null,"code":"var _jsxFileName = \"F:\\\\repair_shop\\\\frontend\\\\src\\\\pages\\\\NewOrder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Paper, TextField, Button, Typography, Box, Grid, FormControl, InputLabel, Select, MenuItem, Alert, CircularProgress, Card, CardContent, Chip } from '@mui/material';\nimport { Add as AddIcon, Save as SaveIcon, Clear as ClearIcon } from '@mui/icons-material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { orderService, clientService, deviceService, serviceService } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NewOrder = () => {\n  _s();\n  var _fromRequest$Client;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Данные для форм\n  const [clients, setClients] = useState([]);\n  const [devices, setDevices] = useState([]);\n  const [services, setServices] = useState([]);\n  const [deviceTypes, setDeviceTypes] = useState([]);\n  const [brands, setBrands] = useState([]);\n\n  // Форма заказа\n  const [formData, setFormData] = useState({\n    client_id: '',\n    device_id: '',\n    problem_description: '',\n    services: []\n  });\n\n  // Форма нового клиента\n  const [newClient, setNewClient] = useState({\n    name: '',\n    phone: '',\n    email: '',\n    address: ''\n  });\n\n  // Форма нового устройства\n  const [newDevice, setNewDevice] = useState({\n    id_type: '',\n    id_brand: '',\n    model: '',\n    serial_number: ''\n  });\n  const [showNewClient, setShowNewClient] = useState(false);\n  const [showNewDevice, setShowNewDevice] = useState(false);\n  const [fromRequest, setFromRequest] = useState(null);\n  useEffect(() => {\n    var _location$state;\n    // Проверяем авторизацию перед загрузкой данных\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    loadInitialData();\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.fromRequest) {\n      const request = location.state.fromRequest;\n      setFromRequest(request);\n      prefillFormFromRequest(request);\n    }\n  }, [location, navigate]);\n  const prefillFormFromRequest = async request => {\n    console.log('Prefilling form from request:', request);\n    try {\n      // Проверяем авторизацию\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Требуется авторизация');\n        navigate('/login');\n        return;\n      }\n\n      // Ищем существующего клиента\n      let client = clients.find(c => c.email === request.contact_email || c.phone === request.contact_phone);\n\n      // Если клиент не найден, создаем нового с валидацией\n      if (!client) {\n        var _request$Client;\n        const clientData = {\n          name: ((_request$Client = request.Client) === null || _request$Client === void 0 ? void 0 : _request$Client.name) || `Клиент ${request.contact_phone}`,\n          phone: request.contact_phone,\n          email: request.contact_email || `${request.contact_phone}@temp.com`,\n          address: request.address || 'Адрес не указан'\n        };\n\n        // Валидация обязательных полей\n        if (!clientData.name.trim() || !clientData.phone.trim()) {\n          throw new Error('Недостаточно данных для создания клиента');\n        }\n        const clientResponse = await clientService.createClient(clientData);\n        client = clientResponse.data;\n        setClients(prev => [...prev, client]);\n      }\n\n      // Ищем существующее устройство\n      let device = devices.find(d => {\n        var _d$Brand;\n        return d.model === request.device_model && ((_d$Brand = d.Brand) === null || _d$Brand === void 0 ? void 0 : _d$Brand.name) === request.device_brand;\n      });\n\n      // Если устройство не найдено, создаем новое\n      if (!device) {\n        // Находим или создаем тип устройства\n        let deviceType = deviceTypes.find(t => t.name === request.device_type);\n        if (!deviceType && request.device_type) {\n          try {\n            const typeResponse = await deviceService.createDeviceType({\n              name: request.device_type,\n              description: `Тип устройства для ${request.device_brand}`\n            });\n            deviceType = typeResponse.data;\n            setDeviceTypes(prev => [...prev, deviceType]);\n          } catch (error) {\n            console.warn('Не удалось создать тип устройства:', error);\n            // Используем первый доступный тип\n            deviceType = deviceTypes[0];\n          }\n        }\n\n        // Находим или создаем бренд\n        let brand = brands.find(b => b.name === request.device_brand);\n        if (!brand && request.device_brand) {\n          try {\n            const brandResponse = await deviceService.createBrand({\n              name: request.device_brand\n            });\n            brand = brandResponse.data;\n            setBrands(prev => [...prev, brand]);\n          } catch (error) {\n            console.warn('Не удалось создать бренд:', error);\n            // Используем первый доступный бренд\n            brand = brands[0];\n          }\n        }\n        if (deviceType && brand) {\n          const deviceResponse = await deviceService.createDevice({\n            id_type: deviceType.id_type,\n            id_brand: brand.id_brand,\n            model: request.device_model || 'Модель не указана',\n            serial_number: request.serial_number || ''\n          });\n          device = deviceResponse.data;\n          setDevices(prev => [...prev, device]);\n        }\n      }\n      if (client && device) {\n        setFormData({\n          client_id: client.id_client,\n          device_id: device.id_device,\n          problem_description: request.problem_description || '',\n          services: []\n        });\n        setSuccess('Данные из заявки автоматически заполнены!');\n      } else {\n        setError('Не удалось создать необходимые данные для заказа');\n      }\n    } catch (error) {\n      var _error$response;\n      console.error('Error pre-filling form:', error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        localStorage.removeItem('token');\n        setError('Сессия истекла. Пожалуйста, войдите снова.');\n        navigate('/login');\n      } else {\n        setError(`Ошибка при заполнении данных из заявки: ${error.message || 'неизвестная ошибка'}`);\n      }\n    }\n  };\n  const loadInitialData = async () => {\n    try {\n      setLoading(true);\n      const [clientsRes, devicesRes, servicesRes, typesRes, brandsRes] = await Promise.all([clientService.getClients({\n        page: 1,\n        limit: 100\n      }), deviceService.getDevices({\n        page: 1,\n        limit: 100\n      }), serviceService.getServices({\n        page: 1,\n        limit: 100\n      }), deviceService.getDeviceTypes(), deviceService.getBrands()]);\n      setClients(clientsRes.data.clients || []);\n      setDevices(devicesRes.data.devices || []);\n      setServices(servicesRes.data.services || []);\n      setDeviceTypes(typesRes.data || []);\n      setBrands(brandsRes.data || []);\n    } catch (error) {\n      var _error$response2;\n      console.error('Error loading initial data:', error);\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n        localStorage.removeItem('token');\n        navigate('/login');\n      } else {\n        setError('Ошибка при загрузке данных');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFormChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleServiceToggle = serviceId => {\n    setFormData(prev => {\n      const services = [...prev.services];\n      const index = services.indexOf(serviceId);\n      if (index > -1) {\n        services.splice(index, 1);\n      } else {\n        services.push(serviceId);\n      }\n      return {\n        ...prev,\n        services\n      };\n    });\n  };\n  const handleNewClientChange = (field, value) => {\n    setNewClient(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleNewDeviceChange = (field, value) => {\n    setNewDevice(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const createNewClient = async () => {\n    try {\n      // Валидация\n      if (!newClient.name.trim() || !newClient.phone.trim()) {\n        setError('Заполните обязательные поля: имя и телефон');\n        return;\n      }\n      const clientData = {\n        name: newClient.name,\n        phone: newClient.phone,\n        email: newClient.email || `${newClient.phone}@client.com`,\n        address: newClient.address || 'Не указан'\n      };\n      const response = await clientService.createClient(clientData);\n      setClients(prev => [...prev, response.data]);\n      setFormData(prev => ({\n        ...prev,\n        client_id: response.data.id_client\n      }));\n      setShowNewClient(false);\n      setNewClient({\n        name: '',\n        phone: '',\n        email: '',\n        address: ''\n      });\n      setSuccess('Клиент успешно создан!');\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Error creating client:', error);\n      setError('Ошибка при создании клиента: ' + (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || error.message || 'неизвестная ошибка'));\n    }\n  };\n  const createNewDevice = async () => {\n    try {\n      if (!newDevice.id_type || !newDevice.id_brand || !newDevice.model.trim()) {\n        setError('Заполните обязательные поля: тип, бренд и модель');\n        return;\n      }\n      const response = await deviceService.createDevice({\n        id_type: newDevice.id_type,\n        id_brand: newDevice.id_brand,\n        model: newDevice.model,\n        serial_number: newDevice.serial_number || ''\n      });\n      setDevices(prev => [...prev, response.data]);\n      setFormData(prev => ({\n        ...prev,\n        device_id: response.data.id_device\n      }));\n      setShowNewDevice(false);\n      setNewDevice({\n        id_type: '',\n        id_brand: '',\n        model: '',\n        serial_number: ''\n      });\n      setSuccess('Устройство успешно создано!');\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Error creating device:', error);\n      setError('Ошибка при создании устройства: ' + (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || error.message || 'неизвестная ошибка'));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.client_id || !formData.device_id || !formData.problem_description.trim()) {\n      setError('Заполните обязательные поля: клиент, устройство и описание проблемы');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      setError('');\n      const orderData = {\n        client_id: formData.client_id,\n        device_id: formData.device_id,\n        problem_description: formData.problem_description,\n        services: formData.services\n      };\n      await orderService.createOrder(orderData);\n      setSuccess('Заказ успешно создан!');\n      setTimeout(() => {\n        navigate('/orders');\n      }, 2000);\n    } catch (error) {\n      var _error$response5;\n      console.error('Error creating order:', error);\n      if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 401) {\n        localStorage.removeItem('token');\n        navigate('/login');\n      } else {\n        var _error$response6, _error$response6$data;\n        setError(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || 'Ошибка при создании заказа');\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const getSelectedServices = () => {\n    return services.filter(service => formData.services.includes(service.id_service));\n  };\n  const getTotalPrice = () => {\n    return getSelectedServices().reduce((total, service) => total + parseFloat(service.price || 0), 0);\n  };\n  const clearFromRequest = () => {\n    setFromRequest(null);\n    setFormData({\n      client_id: '',\n      device_id: '',\n      problem_description: '',\n      services: []\n    });\n    setSuccess('Данные из заявки очищены');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        minHeight: \"400px\",\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        children: [\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0437\\u0430\\u043A\\u0430\\u0437 \\u043D\\u0430 \\u0440\\u0435\\u043C\\u043E\\u043D\\u0442\", fromRequest && /*#__PURE__*/_jsxDEV(Chip, {\n          label: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0435\\u0442\\u0441\\u044F \\u0438\\u0437 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\",\n          color: \"primary\",\n          size: \"small\",\n          sx: {\n            ml: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), fromRequest && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(ClearIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 24\n        }, this),\n        onClick: clearFromRequest,\n        children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 2\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 19\n    }, this), fromRequest && /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mb: 3,\n        bgcolor: 'primary.light',\n        color: 'white'\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: [\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u0437 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438 #\", fromRequest.id_request]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442: \", (_fromRequest$Client = fromRequest.Client) === null || _fromRequest$Client === void 0 ? void 0 : _fromRequest$Client.name, \" | \\u0423\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E: \", fromRequest.device_brand, \" \", fromRequest.device_model, \" | \\u0422\\u0438\\u043F: \", fromRequest.device_type]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        component: \"form\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: formData.client_id,\n                  label: \"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 *\",\n                  onChange: e => handleFormChange('client_id', e.target.value),\n                  children: clients.map(client => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: client.id_client,\n                    children: [client.name, \" - \", client.phone]\n                  }, client.id_client, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: () => setShowNewClient(!showNewClient),\n                startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 30\n                }, this),\n                children: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this), showNewClient && /*#__PURE__*/_jsxDEV(Card, {\n              variant: \"outlined\",\n              sx: {\n                mb: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"\\u0418\\u043C\\u044F *\",\n                      value: newClient.name,\n                      onChange: e => handleNewClientChange('name', e.target.value),\n                      error: !newClient.name.trim(),\n                      helperText: !newClient.name.trim() ? \"Обязательное поле\" : \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 472,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D *\",\n                      value: newClient.phone,\n                      onChange: e => handleNewClientChange('phone', e.target.value),\n                      error: !newClient.phone.trim(),\n                      helperText: !newClient.phone.trim() ? \"Обязательное поле\" : \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 482,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 481,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Email\",\n                      type: \"email\",\n                      value: newClient.email,\n                      onChange: e => handleNewClientChange('email', e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 492,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"\\u0410\\u0434\\u0440\\u0435\\u0441\",\n                      value: newClient.address,\n                      onChange: e => handleNewClientChange('address', e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 501,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      onClick: createNewClient,\n                      disabled: !newClient.name.trim() || !newClient.phone.trim(),\n                      children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 509,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 508,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"\\u0423\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: formData.device_id,\n                  label: \"\\u0423\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E *\",\n                  onChange: e => handleFormChange('device_id', e.target.value),\n                  children: devices.map(device => {\n                    var _device$Brand, _device$DeviceType;\n                    return /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: device.id_device,\n                      children: [(_device$Brand = device.Brand) === null || _device$Brand === void 0 ? void 0 : _device$Brand.name, \" \", device.model, \" (\", (_device$DeviceType = device.DeviceType) === null || _device$DeviceType === void 0 ? void 0 : _device$DeviceType.name, \")\"]\n                    }, device.id_device, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 534,\n                      columnNumber: 23\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: () => setShowNewDevice(!showNewDevice),\n                startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 30\n                }, this),\n                children: \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this), showNewDevice && /*#__PURE__*/_jsxDEV(Card, {\n              variant: \"outlined\",\n              sx: {\n                mb: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"\\u0422\\u0438\\u043F \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430 *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 558,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        value: newDevice.id_type,\n                        label: \"\\u0422\\u0438\\u043F \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430 *\",\n                        onChange: e => handleNewDeviceChange('id_type', e.target.value),\n                        children: deviceTypes.map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: type.id_type,\n                          children: type.name\n                        }, type.id_type, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 565,\n                          columnNumber: 31\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 559,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 557,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 556,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"\\u0411\\u0440\\u0435\\u043D\\u0434 *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 574,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        value: newDevice.id_brand,\n                        label: \"\\u0411\\u0440\\u0435\\u043D\\u0434 *\",\n                        onChange: e => handleNewDeviceChange('id_brand', e.target.value),\n                        children: brands.map(brand => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: brand.id_brand,\n                          children: brand.name\n                        }, brand.id_brand, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 581,\n                          columnNumber: 31\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 575,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 572,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C *\",\n                      value: newDevice.model,\n                      onChange: e => handleNewDeviceChange('model', e.target.value),\n                      error: !newDevice.model.trim(),\n                      helperText: !newDevice.model.trim() ? \"Обязательное поле\" : \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 589,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 588,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"\\u0421\\u0435\\u0440\\u0438\\u0439\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\",\n                      value: newDevice.serial_number,\n                      onChange: e => handleNewDeviceChange('serial_number', e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 599,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 598,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"contained\",\n                      onClick: createNewDevice,\n                      disabled: !newDevice.id_type || !newDevice.id_brand || !newDevice.model.trim(),\n                      children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u043E\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 606,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              multiline: true,\n              rows: 4,\n              label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B *\",\n              value: formData.problem_description,\n              onChange: e => handleFormChange('problem_description', e.target.value),\n              error: !formData.problem_description.trim(),\n              helperText: !formData.problem_description.trim() ? \"Обязательное поле\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u0423\\u0441\\u043B\\u0443\\u0433\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: services.map(service => /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                md: 4,\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  variant: formData.services.includes(service.id_service) ? \"elevated\" : \"outlined\",\n                  sx: {\n                    cursor: 'pointer',\n                    border: formData.services.includes(service.id_service) ? '2px solid' : '1px solid',\n                    borderColor: formData.services.includes(service.id_service) ? 'primary.main' : 'divider'\n                  },\n                  onClick: () => handleServiceToggle(service.id_service),\n                  children: /*#__PURE__*/_jsxDEV(CardContent, {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"subtitle1\",\n                      gutterBottom: true,\n                      children: service.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"textSecondary\",\n                      gutterBottom: true,\n                      children: service.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 656,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"h6\",\n                        color: \"primary\",\n                        children: [service.price, \" \\u20BD\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 660,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                        label: formData.services.includes(service.id_service) ? \"Выбрано\" : \"Выбрать\",\n                        color: formData.services.includes(service.id_service) ? \"primary\" : \"default\",\n                        size: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 663,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 659,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 21\n                }, this)\n              }, service.id_service, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 13\n          }, this), formData.services.length > 0 && /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sx: {\n                bgcolor: 'primary.light',\n                color: 'white'\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 681,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h4\",\n                  children: [getTotalPrice(), \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: [\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E \\u0443\\u0441\\u043B\\u0443\\u0433: \", formData.services.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                justifyContent: 'flex-end'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: () => navigate('/orders'),\n                children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"contained\",\n                disabled: submitting,\n                startIcon: submitting ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 43\n                }, this) : /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 76\n                }, this),\n                children: submitting ? 'Создание...' : 'Создать заказ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 389,\n    columnNumber: 5\n  }, this);\n};\n_s(NewOrder, \"cxKP2D++qBGtbowNMi5xjCEYCOw=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = NewOrder;\nexport default NewOrder;\nvar _c;\n$RefreshReg$(_c, \"NewOrder\");","map":{"version":3,"names":["React","useState","useEffect","Container","Paper","TextField","Button","Typography","Box","Grid","FormControl","InputLabel","Select","MenuItem","Alert","CircularProgress","Card","CardContent","Chip","Add","AddIcon","Save","SaveIcon","Clear","ClearIcon","useNavigate","useLocation","orderService","clientService","deviceService","serviceService","jsxDEV","_jsxDEV","NewOrder","_s","_fromRequest$Client","navigate","location","loading","setLoading","submitting","setSubmitting","error","setError","success","setSuccess","clients","setClients","devices","setDevices","services","setServices","deviceTypes","setDeviceTypes","brands","setBrands","formData","setFormData","client_id","device_id","problem_description","newClient","setNewClient","name","phone","email","address","newDevice","setNewDevice","id_type","id_brand","model","serial_number","showNewClient","setShowNewClient","showNewDevice","setShowNewDevice","fromRequest","setFromRequest","_location$state","token","localStorage","getItem","loadInitialData","state","request","prefillFormFromRequest","console","log","client","find","c","contact_email","contact_phone","_request$Client","clientData","Client","trim","Error","clientResponse","createClient","data","prev","device","d","_d$Brand","device_model","Brand","device_brand","deviceType","t","device_type","typeResponse","createDeviceType","description","warn","brand","b","brandResponse","createBrand","deviceResponse","createDevice","id_client","id_device","_error$response","response","status","removeItem","message","clientsRes","devicesRes","servicesRes","typesRes","brandsRes","Promise","all","getClients","page","limit","getDevices","getServices","getDeviceTypes","getBrands","_error$response2","handleFormChange","field","value","handleServiceToggle","serviceId","index","indexOf","splice","push","handleNewClientChange","handleNewDeviceChange","createNewClient","_error$response3","_error$response3$data","createNewDevice","_error$response4","_error$response4$data","handleSubmit","e","preventDefault","orderData","createOrder","setTimeout","_error$response5","_error$response6","_error$response6$data","getSelectedServices","filter","service","includes","id_service","getTotalPrice","reduce","total","parseFloat","price","clearFromRequest","children","display","justifyContent","alignItems","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","sx","mb","variant","component","label","color","size","ml","startIcon","onClick","severity","bgcolor","gutterBottom","id_request","p","onSubmit","container","spacing","item","xs","gap","fullWidth","onChange","target","map","sm","helperText","type","disabled","_device$Brand","_device$DeviceType","DeviceType","multiline","rows","md","cursor","border","borderColor","length","_c","$RefreshReg$"],"sources":["F:/repair_shop/frontend/src/pages/NewOrder.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Alert,\r\n  CircularProgress,\r\n  Card,\r\n  CardContent,\r\n  Chip\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Save as SaveIcon,\r\n  Clear as ClearIcon\r\n} from '@mui/icons-material';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { orderService, clientService, deviceService, serviceService } from '../services/api';\r\n\r\nconst NewOrder = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  // Данные для форм\r\n  const [clients, setClients] = useState([]);\r\n  const [devices, setDevices] = useState([]);\r\n  const [services, setServices] = useState([]);\r\n  const [deviceTypes, setDeviceTypes] = useState([]);\r\n  const [brands, setBrands] = useState([]);\r\n\r\n  // Форма заказа\r\n  const [formData, setFormData] = useState({\r\n    client_id: '',\r\n    device_id: '',\r\n    problem_description: '',\r\n    services: []\r\n  });\r\n\r\n  // Форма нового клиента\r\n  const [newClient, setNewClient] = useState({\r\n    name: '',\r\n    phone: '',\r\n    email: '',\r\n    address: ''\r\n  });\r\n\r\n  // Форма нового устройства\r\n  const [newDevice, setNewDevice] = useState({\r\n    id_type: '',\r\n    id_brand: '',\r\n    model: '',\r\n    serial_number: ''\r\n  });\r\n\r\n  const [showNewClient, setShowNewClient] = useState(false);\r\n  const [showNewDevice, setShowNewDevice] = useState(false);\r\n  const [fromRequest, setFromRequest] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Проверяем авторизацию перед загрузкой данных\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    loadInitialData();\r\n    \r\n    if (location.state?.fromRequest) {\r\n      const request = location.state.fromRequest;\r\n      setFromRequest(request);\r\n      prefillFormFromRequest(request);\r\n    }\r\n  }, [location, navigate]);\r\n\r\n  const prefillFormFromRequest = async (request) => {\r\n    console.log('Prefilling form from request:', request);\r\n    \r\n    try {\r\n      // Проверяем авторизацию\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setError('Требуется авторизация');\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      // Ищем существующего клиента\r\n      let client = clients.find(c => \r\n        c.email === request.contact_email || \r\n        c.phone === request.contact_phone\r\n      );\r\n      \r\n      // Если клиент не найден, создаем нового с валидацией\r\n      if (!client) {\r\n        const clientData = {\r\n          name: request.Client?.name || `Клиент ${request.contact_phone}`,\r\n          phone: request.contact_phone,\r\n          email: request.contact_email || `${request.contact_phone}@temp.com`,\r\n          address: request.address || 'Адрес не указан'\r\n        };\r\n\r\n        // Валидация обязательных полей\r\n        if (!clientData.name.trim() || !clientData.phone.trim()) {\r\n          throw new Error('Недостаточно данных для создания клиента');\r\n        }\r\n\r\n        const clientResponse = await clientService.createClient(clientData);\r\n        client = clientResponse.data;\r\n        setClients(prev => [...prev, client]);\r\n      }\r\n\r\n      // Ищем существующее устройство\r\n      let device = devices.find(d => \r\n        d.model === request.device_model && \r\n        d.Brand?.name === request.device_brand\r\n      );\r\n\r\n      // Если устройство не найдено, создаем новое\r\n      if (!device) {\r\n        // Находим или создаем тип устройства\r\n        let deviceType = deviceTypes.find(t => t.name === request.device_type);\r\n        if (!deviceType && request.device_type) {\r\n          try {\r\n            const typeResponse = await deviceService.createDeviceType({\r\n              name: request.device_type,\r\n              description: `Тип устройства для ${request.device_brand}`\r\n            });\r\n            deviceType = typeResponse.data;\r\n            setDeviceTypes(prev => [...prev, deviceType]);\r\n          } catch (error) {\r\n            console.warn('Не удалось создать тип устройства:', error);\r\n            // Используем первый доступный тип\r\n            deviceType = deviceTypes[0];\r\n          }\r\n        }\r\n\r\n        // Находим или создаем бренд\r\n        let brand = brands.find(b => b.name === request.device_brand);\r\n        if (!brand && request.device_brand) {\r\n          try {\r\n            const brandResponse = await deviceService.createBrand({\r\n              name: request.device_brand\r\n            });\r\n            brand = brandResponse.data;\r\n            setBrands(prev => [...prev, brand]);\r\n          } catch (error) {\r\n            console.warn('Не удалось создать бренд:', error);\r\n            // Используем первый доступный бренд\r\n            brand = brands[0];\r\n          }\r\n        }\r\n\r\n        if (deviceType && brand) {\r\n          const deviceResponse = await deviceService.createDevice({\r\n            id_type: deviceType.id_type,\r\n            id_brand: brand.id_brand,\r\n            model: request.device_model || 'Модель не указана',\r\n            serial_number: request.serial_number || ''\r\n          });\r\n          device = deviceResponse.data;\r\n          setDevices(prev => [...prev, device]);\r\n        }\r\n      }\r\n\r\n      if (client && device) {\r\n        setFormData({\r\n          client_id: client.id_client,\r\n          device_id: device.id_device,\r\n          problem_description: request.problem_description || '',\r\n          services: []\r\n        });\r\n        setSuccess('Данные из заявки автоматически заполнены!');\r\n      } else {\r\n        setError('Не удалось создать необходимые данные для заказа');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error pre-filling form:', error);\r\n      if (error.response?.status === 401) {\r\n        localStorage.removeItem('token');\r\n        setError('Сессия истекла. Пожалуйста, войдите снова.');\r\n        navigate('/login');\r\n      } else {\r\n        setError(`Ошибка при заполнении данных из заявки: ${error.message || 'неизвестная ошибка'}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const loadInitialData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [clientsRes, devicesRes, servicesRes, typesRes, brandsRes] = await Promise.all([\r\n        clientService.getClients({ page: 1, limit: 100 }),\r\n        deviceService.getDevices({ page: 1, limit: 100 }),\r\n        serviceService.getServices({ page: 1, limit: 100 }),\r\n        deviceService.getDeviceTypes(),\r\n        deviceService.getBrands()\r\n      ]);\r\n\r\n      setClients(clientsRes.data.clients || []);\r\n      setDevices(devicesRes.data.devices || []);\r\n      setServices(servicesRes.data.services || []);\r\n      setDeviceTypes(typesRes.data || []);\r\n      setBrands(brandsRes.data || []);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error);\r\n      if (error.response?.status === 401) {\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } else {\r\n        setError('Ошибка при загрузке данных');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFormChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleServiceToggle = (serviceId) => {\r\n    setFormData(prev => {\r\n      const services = [...prev.services];\r\n      const index = services.indexOf(serviceId);\r\n      \r\n      if (index > -1) {\r\n        services.splice(index, 1);\r\n      } else {\r\n        services.push(serviceId);\r\n      }\r\n      \r\n      return { ...prev, services };\r\n    });\r\n  };\r\n\r\n  const handleNewClientChange = (field, value) => {\r\n    setNewClient(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleNewDeviceChange = (field, value) => {\r\n    setNewDevice(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const createNewClient = async () => {\r\n    try {\r\n      // Валидация\r\n      if (!newClient.name.trim() || !newClient.phone.trim()) {\r\n        setError('Заполните обязательные поля: имя и телефон');\r\n        return;\r\n      }\r\n\r\n      const clientData = {\r\n        name: newClient.name,\r\n        phone: newClient.phone,\r\n        email: newClient.email || `${newClient.phone}@client.com`,\r\n        address: newClient.address || 'Не указан'\r\n      };\r\n\r\n      const response = await clientService.createClient(clientData);\r\n      setClients(prev => [...prev, response.data]);\r\n      setFormData(prev => ({ ...prev, client_id: response.data.id_client }));\r\n      setShowNewClient(false);\r\n      setNewClient({ name: '', phone: '', email: '', address: '' });\r\n      setSuccess('Клиент успешно создан!');\r\n    } catch (error) {\r\n      console.error('Error creating client:', error);\r\n      setError('Ошибка при создании клиента: ' + \r\n        (error.response?.data?.error || error.message || 'неизвестная ошибка'));\r\n    }\r\n  };\r\n\r\n  const createNewDevice = async () => {\r\n    try {\r\n      if (!newDevice.id_type || !newDevice.id_brand || !newDevice.model.trim()) {\r\n        setError('Заполните обязательные поля: тип, бренд и модель');\r\n        return;\r\n      }\r\n\r\n      const response = await deviceService.createDevice({\r\n        id_type: newDevice.id_type,\r\n        id_brand: newDevice.id_brand,\r\n        model: newDevice.model,\r\n        serial_number: newDevice.serial_number || ''\r\n      });\r\n      \r\n      setDevices(prev => [...prev, response.data]);\r\n      setFormData(prev => ({ ...prev, device_id: response.data.id_device }));\r\n      setShowNewDevice(false);\r\n      setNewDevice({ id_type: '', id_brand: '', model: '', serial_number: '' });\r\n      setSuccess('Устройство успешно создано!');\r\n    } catch (error) {\r\n      console.error('Error creating device:', error);\r\n      setError('Ошибка при создании устройства: ' + \r\n        (error.response?.data?.error || error.message || 'неизвестная ошибка'));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.client_id || !formData.device_id || !formData.problem_description.trim()) {\r\n      setError('Заполните обязательные поля: клиент, устройство и описание проблемы');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      setError('');\r\n      \r\n      const orderData = {\r\n        client_id: formData.client_id,\r\n        device_id: formData.device_id,\r\n        problem_description: formData.problem_description,\r\n        services: formData.services\r\n      };\r\n      \r\n      await orderService.createOrder(orderData);\r\n      \r\n      setSuccess('Заказ успешно создан!');\r\n      setTimeout(() => {\r\n        navigate('/orders');\r\n      }, 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error creating order:', error);\r\n      if (error.response?.status === 401) {\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } else {\r\n        setError(error.response?.data?.error || 'Ошибка при создании заказа');\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const getSelectedServices = () => {\r\n    return services.filter(service => formData.services.includes(service.id_service));\r\n  };\r\n\r\n  const getTotalPrice = () => {\r\n    return getSelectedServices().reduce((total, service) => total + parseFloat(service.price || 0), 0);\r\n  };\r\n\r\n  const clearFromRequest = () => {\r\n    setFromRequest(null);\r\n    setFormData({\r\n      client_id: '',\r\n      device_id: '',\r\n      problem_description: '',\r\n      services: []\r\n    });\r\n    setSuccess('Данные из заявки очищены');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n          <CircularProgress />\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Box sx={{ mb: 3, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <Typography variant=\"h4\" component=\"h1\">\r\n          Новый заказ на ремонт\r\n          {fromRequest && (\r\n            <Chip \r\n              label=\"Создается из заявки\" \r\n              color=\"primary\" \r\n              size=\"small\" \r\n              sx={{ ml: 2 }}\r\n            />\r\n          )}\r\n        </Typography>\r\n        {fromRequest && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<ClearIcon />}\r\n            onClick={clearFromRequest}\r\n          >\r\n            Очистить данные заявки\r\n          </Button>\r\n        )}\r\n      </Box>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n      {success && <Alert severity=\"success\" sx={{ mb: 2 }}>{success}</Alert>}\r\n\r\n      {fromRequest && (\r\n        <Card sx={{ mb: 3, bgcolor: 'primary.light', color: 'white' }}>\r\n          <CardContent>\r\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <Box>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  Данные из заявки #{fromRequest.id_request}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  Клиент: {fromRequest.Client?.name} | \r\n                  Устройство: {fromRequest.device_brand} {fromRequest.device_model} | \r\n                  Тип: {fromRequest.device_type}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <Paper sx={{ p: 3 }}>\r\n        <Box component=\"form\" onSubmit={handleSubmit}>\r\n          <Grid container spacing={3}>\r\n            {/* Выбор клиента */}\r\n            <Grid item xs={12}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel>Клиент *</InputLabel>\r\n                  <Select\r\n                    value={formData.client_id}\r\n                    label=\"Клиент *\"\r\n                    onChange={(e) => handleFormChange('client_id', e.target.value)}\r\n                  >\r\n                    {clients.map(client => (\r\n                      <MenuItem key={client.id_client} value={client.id_client}>\r\n                        {client.name} - {client.phone}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  onClick={() => setShowNewClient(!showNewClient)}\r\n                  startIcon={<AddIcon />}\r\n                >\r\n                  Новый клиент\r\n                </Button>\r\n              </Box>\r\n\r\n              {showNewClient && (\r\n                <Card variant=\"outlined\" sx={{ mb: 2 }}>\r\n                  <CardContent>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Новый клиент\r\n                    </Typography>\r\n                    <Grid container spacing={2}>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Имя *\"\r\n                          value={newClient.name}\r\n                          onChange={(e) => handleNewClientChange('name', e.target.value)}\r\n                          error={!newClient.name.trim()}\r\n                          helperText={!newClient.name.trim() ? \"Обязательное поле\" : \"\"}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Телефон *\"\r\n                          value={newClient.phone}\r\n                          onChange={(e) => handleNewClientChange('phone', e.target.value)}\r\n                          error={!newClient.phone.trim()}\r\n                          helperText={!newClient.phone.trim() ? \"Обязательное поле\" : \"\"}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Email\"\r\n                          type=\"email\"\r\n                          value={newClient.email}\r\n                          onChange={(e) => handleNewClientChange('email', e.target.value)}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Адрес\"\r\n                          value={newClient.address}\r\n                          onChange={(e) => handleNewClientChange('address', e.target.value)}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <Button\r\n                          variant=\"contained\"\r\n                          onClick={createNewClient}\r\n                          disabled={!newClient.name.trim() || !newClient.phone.trim()}\r\n                        >\r\n                          Создать клиента\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </Grid>\r\n\r\n            {/* Выбор устройства */}\r\n            <Grid item xs={12}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel>Устройство *</InputLabel>\r\n                  <Select\r\n                    value={formData.device_id}\r\n                    label=\"Устройство *\"\r\n                    onChange={(e) => handleFormChange('device_id', e.target.value)}\r\n                  >\r\n                    {devices.map(device => (\r\n                      <MenuItem key={device.id_device} value={device.id_device}>\r\n                        {device.Brand?.name} {device.model} ({device.DeviceType?.name})\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  onClick={() => setShowNewDevice(!showNewDevice)}\r\n                  startIcon={<AddIcon />}\r\n                >\r\n                  Новое устройство\r\n                </Button>\r\n              </Box>\r\n\r\n              {showNewDevice && (\r\n                <Card variant=\"outlined\" sx={{ mb: 2 }}>\r\n                  <CardContent>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Новое устройство\r\n                    </Typography>\r\n                    <Grid container spacing={2}>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <FormControl fullWidth>\r\n                          <InputLabel>Тип устройства *</InputLabel>\r\n                          <Select\r\n                            value={newDevice.id_type}\r\n                            label=\"Тип устройства *\"\r\n                            onChange={(e) => handleNewDeviceChange('id_type', e.target.value)}\r\n                          >\r\n                            {deviceTypes.map(type => (\r\n                              <MenuItem key={type.id_type} value={type.id_type}>\r\n                                {type.name}\r\n                              </MenuItem>\r\n                            ))}\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <FormControl fullWidth>\r\n                          <InputLabel>Бренд *</InputLabel>\r\n                          <Select\r\n                            value={newDevice.id_brand}\r\n                            label=\"Бренд *\"\r\n                            onChange={(e) => handleNewDeviceChange('id_brand', e.target.value)}\r\n                          >\r\n                            {brands.map(brand => (\r\n                              <MenuItem key={brand.id_brand} value={brand.id_brand}>\r\n                                {brand.name}\r\n                              </MenuItem>\r\n                            ))}\r\n                          </Select>\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Модель *\"\r\n                          value={newDevice.model}\r\n                          onChange={(e) => handleNewDeviceChange('model', e.target.value)}\r\n                          error={!newDevice.model.trim()}\r\n                          helperText={!newDevice.model.trim() ? \"Обязательное поле\" : \"\"}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                          fullWidth\r\n                          label=\"Серийный номер\"\r\n                          value={newDevice.serial_number}\r\n                          onChange={(e) => handleNewDeviceChange('serial_number', e.target.value)}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <Button\r\n                          variant=\"contained\"\r\n                          onClick={createNewDevice}\r\n                          disabled={!newDevice.id_type || !newDevice.id_brand || !newDevice.model.trim()}\r\n                        >\r\n                          Создать устройство\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </Grid>\r\n\r\n            {/* Описание проблемы */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={4}\r\n                label=\"Описание проблемы *\"\r\n                value={formData.problem_description}\r\n                onChange={(e) => handleFormChange('problem_description', e.target.value)}\r\n                error={!formData.problem_description.trim()}\r\n                helperText={!formData.problem_description.trim() ? \"Обязательное поле\" : \"\"}\r\n              />\r\n            </Grid>\r\n\r\n            {/* Выбор услуг */}\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Услуги\r\n              </Typography>\r\n              <Grid container spacing={2}>\r\n                {services.map(service => (\r\n                  <Grid item xs={12} sm={6} md={4} key={service.id_service}>\r\n                    <Card \r\n                      variant={formData.services.includes(service.id_service) ? \"elevated\" : \"outlined\"}\r\n                      sx={{ \r\n                        cursor: 'pointer',\r\n                        border: formData.services.includes(service.id_service) ? '2px solid' : '1px solid',\r\n                        borderColor: formData.services.includes(service.id_service) ? 'primary.main' : 'divider'\r\n                      }}\r\n                      onClick={() => handleServiceToggle(service.id_service)}\r\n                    >\r\n                      <CardContent>\r\n                        <Typography variant=\"subtitle1\" gutterBottom>\r\n                          {service.name}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom>\r\n                          {service.description}\r\n                        </Typography>\r\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                          <Typography variant=\"h6\" color=\"primary\">\r\n                            {service.price} ₽\r\n                          </Typography>\r\n                          <Chip \r\n                            label={formData.services.includes(service.id_service) ? \"Выбрано\" : \"Выбрать\"}\r\n                            color={formData.services.includes(service.id_service) ? \"primary\" : \"default\"}\r\n                            size=\"small\"\r\n                          />\r\n                        </Box>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {/* Итоговая стоимость */}\r\n            {formData.services.length > 0 && (\r\n              <Grid item xs={12}>\r\n                <Card sx={{ bgcolor: 'primary.light', color: 'white' }}>\r\n                  <CardContent>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Предварительная стоимость\r\n                    </Typography>\r\n                    <Typography variant=\"h4\">\r\n                      {getTotalPrice()} ₽\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      Выбрано услуг: {formData.services.length}\r\n                    </Typography>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n            )}\r\n\r\n            {/* Кнопки отправки */}\r\n            <Grid item xs={12}>\r\n              <Box sx={{ display: 'flex', gap: 2, justifyContent: 'flex-end' }}>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  onClick={() => navigate('/orders')}\r\n                >\r\n                  Отмена\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  disabled={submitting}\r\n                  startIcon={submitting ? <CircularProgress size={20} /> : <SaveIcon />}\r\n                >\r\n                  {submitting ? 'Создание...' : 'Создать заказ'}\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NewOrder;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,SAAS,EACTC,KAAK,EACLC,SAAS,EACTC,MAAM,EACNC,UAAU,EACVC,GAAG,EACHC,IAAI,EACJC,WAAW,EACXC,UAAU,EACVC,MAAM,EACNC,QAAQ,EACRC,KAAK,EACLC,gBAAgB,EAChBC,IAAI,EACJC,WAAW,EACXC,IAAI,QACC,eAAe;AACtB,SACEC,GAAG,IAAIC,OAAO,EACdC,IAAI,IAAIC,QAAQ,EAChBC,KAAK,IAAIC,SAAS,QACb,qBAAqB;AAC5B,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,YAAY,EAAEC,aAAa,EAAEC,aAAa,EAAEC,cAAc,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7F,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,mBAAA;EACrB,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAMY,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACuC,UAAU,EAAEC,aAAa,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACyC,KAAK,EAAEC,QAAQ,CAAC,GAAG1C,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC2C,OAAO,EAAEC,UAAU,CAAC,GAAG5C,QAAQ,CAAC,EAAE,CAAC;;EAE1C;EACA,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC+C,OAAO,EAAEC,UAAU,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACiD,QAAQ,EAAEC,WAAW,CAAC,GAAGlD,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACmD,WAAW,EAAEC,cAAc,CAAC,GAAGpD,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACqD,MAAM,EAAEC,SAAS,CAAC,GAAGtD,QAAQ,CAAC,EAAE,CAAC;;EAExC;EACA,MAAM,CAACuD,QAAQ,EAAEC,WAAW,CAAC,GAAGxD,QAAQ,CAAC;IACvCyD,SAAS,EAAE,EAAE;IACbC,SAAS,EAAE,EAAE;IACbC,mBAAmB,EAAE,EAAE;IACvBV,QAAQ,EAAE;EACZ,CAAC,CAAC;;EAEF;EACA,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAG7D,QAAQ,CAAC;IACzC8D,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE;EACX,CAAC,CAAC;;EAEF;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGnE,QAAQ,CAAC;IACzCoE,OAAO,EAAE,EAAE;IACXC,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE,EAAE;IACTC,aAAa,EAAE;EACjB,CAAC,CAAC;EAEF,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGzE,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC0E,aAAa,EAAEC,gBAAgB,CAAC,GAAG3E,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC4E,WAAW,EAAEC,cAAc,CAAC,GAAG7E,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IAAA,IAAA6E,eAAA;IACd;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACV5C,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IAEA+C,eAAe,CAAC,CAAC;IAEjB,KAAAJ,eAAA,GAAI1C,QAAQ,CAAC+C,KAAK,cAAAL,eAAA,eAAdA,eAAA,CAAgBF,WAAW,EAAE;MAC/B,MAAMQ,OAAO,GAAGhD,QAAQ,CAAC+C,KAAK,CAACP,WAAW;MAC1CC,cAAc,CAACO,OAAO,CAAC;MACvBC,sBAAsB,CAACD,OAAO,CAAC;IACjC;EACF,CAAC,EAAE,CAAChD,QAAQ,EAAED,QAAQ,CAAC,CAAC;EAExB,MAAMkD,sBAAsB,GAAG,MAAOD,OAAO,IAAK;IAChDE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEH,OAAO,CAAC;IAErD,IAAI;MACF;MACA,MAAML,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACVrC,QAAQ,CAAC,uBAAuB,CAAC;QACjCP,QAAQ,CAAC,QAAQ,CAAC;QAClB;MACF;;MAEA;MACA,IAAIqD,MAAM,GAAG3C,OAAO,CAAC4C,IAAI,CAACC,CAAC,IACzBA,CAAC,CAAC1B,KAAK,KAAKoB,OAAO,CAACO,aAAa,IACjCD,CAAC,CAAC3B,KAAK,KAAKqB,OAAO,CAACQ,aACtB,CAAC;;MAED;MACA,IAAI,CAACJ,MAAM,EAAE;QAAA,IAAAK,eAAA;QACX,MAAMC,UAAU,GAAG;UACjBhC,IAAI,EAAE,EAAA+B,eAAA,GAAAT,OAAO,CAACW,MAAM,cAAAF,eAAA,uBAAdA,eAAA,CAAgB/B,IAAI,KAAI,UAAUsB,OAAO,CAACQ,aAAa,EAAE;UAC/D7B,KAAK,EAAEqB,OAAO,CAACQ,aAAa;UAC5B5B,KAAK,EAAEoB,OAAO,CAACO,aAAa,IAAI,GAAGP,OAAO,CAACQ,aAAa,WAAW;UACnE3B,OAAO,EAAEmB,OAAO,CAACnB,OAAO,IAAI;QAC9B,CAAC;;QAED;QACA,IAAI,CAAC6B,UAAU,CAAChC,IAAI,CAACkC,IAAI,CAAC,CAAC,IAAI,CAACF,UAAU,CAAC/B,KAAK,CAACiC,IAAI,CAAC,CAAC,EAAE;UACvD,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;QAC7D;QAEA,MAAMC,cAAc,GAAG,MAAMvE,aAAa,CAACwE,YAAY,CAACL,UAAU,CAAC;QACnEN,MAAM,GAAGU,cAAc,CAACE,IAAI;QAC5BtD,UAAU,CAACuD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEb,MAAM,CAAC,CAAC;MACvC;;MAEA;MACA,IAAIc,MAAM,GAAGvD,OAAO,CAAC0C,IAAI,CAACc,CAAC;QAAA,IAAAC,QAAA;QAAA,OACzBD,CAAC,CAACjC,KAAK,KAAKc,OAAO,CAACqB,YAAY,IAChC,EAAAD,QAAA,GAAAD,CAAC,CAACG,KAAK,cAAAF,QAAA,uBAAPA,QAAA,CAAS1C,IAAI,MAAKsB,OAAO,CAACuB,YAAY;MAAA,CACxC,CAAC;;MAED;MACA,IAAI,CAACL,MAAM,EAAE;QACX;QACA,IAAIM,UAAU,GAAGzD,WAAW,CAACsC,IAAI,CAACoB,CAAC,IAAIA,CAAC,CAAC/C,IAAI,KAAKsB,OAAO,CAAC0B,WAAW,CAAC;QACtE,IAAI,CAACF,UAAU,IAAIxB,OAAO,CAAC0B,WAAW,EAAE;UACtC,IAAI;YACF,MAAMC,YAAY,GAAG,MAAMnF,aAAa,CAACoF,gBAAgB,CAAC;cACxDlD,IAAI,EAAEsB,OAAO,CAAC0B,WAAW;cACzBG,WAAW,EAAE,sBAAsB7B,OAAO,CAACuB,YAAY;YACzD,CAAC,CAAC;YACFC,UAAU,GAAGG,YAAY,CAACX,IAAI;YAC9BhD,cAAc,CAACiD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEO,UAAU,CAAC,CAAC;UAC/C,CAAC,CAAC,OAAOnE,KAAK,EAAE;YACd6C,OAAO,CAAC4B,IAAI,CAAC,oCAAoC,EAAEzE,KAAK,CAAC;YACzD;YACAmE,UAAU,GAAGzD,WAAW,CAAC,CAAC,CAAC;UAC7B;QACF;;QAEA;QACA,IAAIgE,KAAK,GAAG9D,MAAM,CAACoC,IAAI,CAAC2B,CAAC,IAAIA,CAAC,CAACtD,IAAI,KAAKsB,OAAO,CAACuB,YAAY,CAAC;QAC7D,IAAI,CAACQ,KAAK,IAAI/B,OAAO,CAACuB,YAAY,EAAE;UAClC,IAAI;YACF,MAAMU,aAAa,GAAG,MAAMzF,aAAa,CAAC0F,WAAW,CAAC;cACpDxD,IAAI,EAAEsB,OAAO,CAACuB;YAChB,CAAC,CAAC;YACFQ,KAAK,GAAGE,aAAa,CAACjB,IAAI;YAC1B9C,SAAS,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEc,KAAK,CAAC,CAAC;UACrC,CAAC,CAAC,OAAO1E,KAAK,EAAE;YACd6C,OAAO,CAAC4B,IAAI,CAAC,2BAA2B,EAAEzE,KAAK,CAAC;YAChD;YACA0E,KAAK,GAAG9D,MAAM,CAAC,CAAC,CAAC;UACnB;QACF;QAEA,IAAIuD,UAAU,IAAIO,KAAK,EAAE;UACvB,MAAMI,cAAc,GAAG,MAAM3F,aAAa,CAAC4F,YAAY,CAAC;YACtDpD,OAAO,EAAEwC,UAAU,CAACxC,OAAO;YAC3BC,QAAQ,EAAE8C,KAAK,CAAC9C,QAAQ;YACxBC,KAAK,EAAEc,OAAO,CAACqB,YAAY,IAAI,mBAAmB;YAClDlC,aAAa,EAAEa,OAAO,CAACb,aAAa,IAAI;UAC1C,CAAC,CAAC;UACF+B,MAAM,GAAGiB,cAAc,CAACnB,IAAI;UAC5BpD,UAAU,CAACqD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEC,MAAM,CAAC,CAAC;QACvC;MACF;MAEA,IAAId,MAAM,IAAIc,MAAM,EAAE;QACpB9C,WAAW,CAAC;UACVC,SAAS,EAAE+B,MAAM,CAACiC,SAAS;UAC3B/D,SAAS,EAAE4C,MAAM,CAACoB,SAAS;UAC3B/D,mBAAmB,EAAEyB,OAAO,CAACzB,mBAAmB,IAAI,EAAE;UACtDV,QAAQ,EAAE;QACZ,CAAC,CAAC;QACFL,UAAU,CAAC,2CAA2C,CAAC;MACzD,CAAC,MAAM;QACLF,QAAQ,CAAC,kDAAkD,CAAC;MAC9D;IACF,CAAC,CAAC,OAAOD,KAAK,EAAE;MAAA,IAAAkF,eAAA;MACdrC,OAAO,CAAC7C,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,IAAI,EAAAkF,eAAA,GAAAlF,KAAK,CAACmF,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;QAClC7C,YAAY,CAAC8C,UAAU,CAAC,OAAO,CAAC;QAChCpF,QAAQ,CAAC,4CAA4C,CAAC;QACtDP,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,MAAM;QACLO,QAAQ,CAAC,2CAA2CD,KAAK,CAACsF,OAAO,IAAI,oBAAoB,EAAE,CAAC;MAC9F;IACF;EACF,CAAC;EAED,MAAM7C,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF5C,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM,CAAC0F,UAAU,EAAEC,UAAU,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACnF3G,aAAa,CAAC4G,UAAU,CAAC;QAAEC,IAAI,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAI,CAAC,CAAC,EACjD7G,aAAa,CAAC8G,UAAU,CAAC;QAAEF,IAAI,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAI,CAAC,CAAC,EACjD5G,cAAc,CAAC8G,WAAW,CAAC;QAAEH,IAAI,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAI,CAAC,CAAC,EACnD7G,aAAa,CAACgH,cAAc,CAAC,CAAC,EAC9BhH,aAAa,CAACiH,SAAS,CAAC,CAAC,CAC1B,CAAC;MAEF/F,UAAU,CAACkF,UAAU,CAAC5B,IAAI,CAACvD,OAAO,IAAI,EAAE,CAAC;MACzCG,UAAU,CAACiF,UAAU,CAAC7B,IAAI,CAACrD,OAAO,IAAI,EAAE,CAAC;MACzCG,WAAW,CAACgF,WAAW,CAAC9B,IAAI,CAACnD,QAAQ,IAAI,EAAE,CAAC;MAC5CG,cAAc,CAAC+E,QAAQ,CAAC/B,IAAI,IAAI,EAAE,CAAC;MACnC9C,SAAS,CAAC8E,SAAS,CAAChC,IAAI,IAAI,EAAE,CAAC;IACjC,CAAC,CAAC,OAAO3D,KAAK,EAAE;MAAA,IAAAqG,gBAAA;MACdxD,OAAO,CAAC7C,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,IAAI,EAAAqG,gBAAA,GAAArG,KAAK,CAACmF,QAAQ,cAAAkB,gBAAA,uBAAdA,gBAAA,CAAgBjB,MAAM,MAAK,GAAG,EAAE;QAClC7C,YAAY,CAAC8C,UAAU,CAAC,OAAO,CAAC;QAChC3F,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,MAAM;QACLO,QAAQ,CAAC,4BAA4B,CAAC;MACxC;IACF,CAAC,SAAS;MACRJ,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMyG,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IACzCzF,WAAW,CAAC6C,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAAC2C,KAAK,GAAGC;IACX,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMC,mBAAmB,GAAIC,SAAS,IAAK;IACzC3F,WAAW,CAAC6C,IAAI,IAAI;MAClB,MAAMpD,QAAQ,GAAG,CAAC,GAAGoD,IAAI,CAACpD,QAAQ,CAAC;MACnC,MAAMmG,KAAK,GAAGnG,QAAQ,CAACoG,OAAO,CAACF,SAAS,CAAC;MAEzC,IAAIC,KAAK,GAAG,CAAC,CAAC,EAAE;QACdnG,QAAQ,CAACqG,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAC3B,CAAC,MAAM;QACLnG,QAAQ,CAACsG,IAAI,CAACJ,SAAS,CAAC;MAC1B;MAEA,OAAO;QAAE,GAAG9C,IAAI;QAAEpD;MAAS,CAAC;IAC9B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMuG,qBAAqB,GAAGA,CAACR,KAAK,EAAEC,KAAK,KAAK;IAC9CpF,YAAY,CAACwC,IAAI,KAAK;MACpB,GAAGA,IAAI;MACP,CAAC2C,KAAK,GAAGC;IACX,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMQ,qBAAqB,GAAGA,CAACT,KAAK,EAAEC,KAAK,KAAK;IAC9C9E,YAAY,CAACkC,IAAI,KAAK;MACpB,GAAGA,IAAI;MACP,CAAC2C,KAAK,GAAGC;IACX,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMS,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF;MACA,IAAI,CAAC9F,SAAS,CAACE,IAAI,CAACkC,IAAI,CAAC,CAAC,IAAI,CAACpC,SAAS,CAACG,KAAK,CAACiC,IAAI,CAAC,CAAC,EAAE;QACrDtD,QAAQ,CAAC,4CAA4C,CAAC;QACtD;MACF;MAEA,MAAMoD,UAAU,GAAG;QACjBhC,IAAI,EAAEF,SAAS,CAACE,IAAI;QACpBC,KAAK,EAAEH,SAAS,CAACG,KAAK;QACtBC,KAAK,EAAEJ,SAAS,CAACI,KAAK,IAAI,GAAGJ,SAAS,CAACG,KAAK,aAAa;QACzDE,OAAO,EAAEL,SAAS,CAACK,OAAO,IAAI;MAChC,CAAC;MAED,MAAM2D,QAAQ,GAAG,MAAMjG,aAAa,CAACwE,YAAY,CAACL,UAAU,CAAC;MAC7DhD,UAAU,CAACuD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEuB,QAAQ,CAACxB,IAAI,CAAC,CAAC;MAC5C5C,WAAW,CAAC6C,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE5C,SAAS,EAAEmE,QAAQ,CAACxB,IAAI,CAACqB;MAAU,CAAC,CAAC,CAAC;MACtEhD,gBAAgB,CAAC,KAAK,CAAC;MACvBZ,YAAY,CAAC;QAAEC,IAAI,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,OAAO,EAAE;MAAG,CAAC,CAAC;MAC7DrB,UAAU,CAAC,wBAAwB,CAAC;IACtC,CAAC,CAAC,OAAOH,KAAK,EAAE;MAAA,IAAAkH,gBAAA,EAAAC,qBAAA;MACdtE,OAAO,CAAC7C,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CC,QAAQ,CAAC,+BAA+B,IACrC,EAAAiH,gBAAA,GAAAlH,KAAK,CAACmF,QAAQ,cAAA+B,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBvD,IAAI,cAAAwD,qBAAA,uBAApBA,qBAAA,CAAsBnH,KAAK,KAAIA,KAAK,CAACsF,OAAO,IAAI,oBAAoB,CAAC,CAAC;IAC3E;EACF,CAAC;EAED,MAAM8B,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,IAAI,CAAC3F,SAAS,CAACE,OAAO,IAAI,CAACF,SAAS,CAACG,QAAQ,IAAI,CAACH,SAAS,CAACI,KAAK,CAAC0B,IAAI,CAAC,CAAC,EAAE;QACxEtD,QAAQ,CAAC,kDAAkD,CAAC;QAC5D;MACF;MAEA,MAAMkF,QAAQ,GAAG,MAAMhG,aAAa,CAAC4F,YAAY,CAAC;QAChDpD,OAAO,EAAEF,SAAS,CAACE,OAAO;QAC1BC,QAAQ,EAAEH,SAAS,CAACG,QAAQ;QAC5BC,KAAK,EAAEJ,SAAS,CAACI,KAAK;QACtBC,aAAa,EAAEL,SAAS,CAACK,aAAa,IAAI;MAC5C,CAAC,CAAC;MAEFvB,UAAU,CAACqD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEuB,QAAQ,CAACxB,IAAI,CAAC,CAAC;MAC5C5C,WAAW,CAAC6C,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE3C,SAAS,EAAEkE,QAAQ,CAACxB,IAAI,CAACsB;MAAU,CAAC,CAAC,CAAC;MACtE/C,gBAAgB,CAAC,KAAK,CAAC;MACvBR,YAAY,CAAC;QAAEC,OAAO,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,aAAa,EAAE;MAAG,CAAC,CAAC;MACzE3B,UAAU,CAAC,6BAA6B,CAAC;IAC3C,CAAC,CAAC,OAAOH,KAAK,EAAE;MAAA,IAAAqH,gBAAA,EAAAC,qBAAA;MACdzE,OAAO,CAAC7C,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CC,QAAQ,CAAC,kCAAkC,IACxC,EAAAoH,gBAAA,GAAArH,KAAK,CAACmF,QAAQ,cAAAkC,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgB1D,IAAI,cAAA2D,qBAAA,uBAApBA,qBAAA,CAAsBtH,KAAK,KAAIA,KAAK,CAACsF,OAAO,IAAI,oBAAoB,CAAC,CAAC;IAC3E;EACF,CAAC;EAED,MAAMiC,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAI,CAAC3G,QAAQ,CAACE,SAAS,IAAI,CAACF,QAAQ,CAACG,SAAS,IAAI,CAACH,QAAQ,CAACI,mBAAmB,CAACqC,IAAI,CAAC,CAAC,EAAE;MACtFtD,QAAQ,CAAC,qEAAqE,CAAC;MAC/E;IACF;IAEA,IAAI;MACFF,aAAa,CAAC,IAAI,CAAC;MACnBE,QAAQ,CAAC,EAAE,CAAC;MAEZ,MAAMyH,SAAS,GAAG;QAChB1G,SAAS,EAAEF,QAAQ,CAACE,SAAS;QAC7BC,SAAS,EAAEH,QAAQ,CAACG,SAAS;QAC7BC,mBAAmB,EAAEJ,QAAQ,CAACI,mBAAmB;QACjDV,QAAQ,EAAEM,QAAQ,CAACN;MACrB,CAAC;MAED,MAAMvB,YAAY,CAAC0I,WAAW,CAACD,SAAS,CAAC;MAEzCvH,UAAU,CAAC,uBAAuB,CAAC;MACnCyH,UAAU,CAAC,MAAM;QACflI,QAAQ,CAAC,SAAS,CAAC;MACrB,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC,CAAC,OAAOM,KAAK,EAAE;MAAA,IAAA6H,gBAAA;MACdhF,OAAO,CAAC7C,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C,IAAI,EAAA6H,gBAAA,GAAA7H,KAAK,CAACmF,QAAQ,cAAA0C,gBAAA,uBAAdA,gBAAA,CAAgBzC,MAAM,MAAK,GAAG,EAAE;QAClC7C,YAAY,CAAC8C,UAAU,CAAC,OAAO,CAAC;QAChC3F,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,MAAM;QAAA,IAAAoI,gBAAA,EAAAC,qBAAA;QACL9H,QAAQ,CAAC,EAAA6H,gBAAA,GAAA9H,KAAK,CAACmF,QAAQ,cAAA2C,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBnE,IAAI,cAAAoE,qBAAA,uBAApBA,qBAAA,CAAsB/H,KAAK,KAAI,4BAA4B,CAAC;MACvE;IACF,CAAC,SAAS;MACRD,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;EAED,MAAMiI,mBAAmB,GAAGA,CAAA,KAAM;IAChC,OAAOxH,QAAQ,CAACyH,MAAM,CAACC,OAAO,IAAIpH,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,CAAC;EACnF,CAAC;EAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,OAAOL,mBAAmB,CAAC,CAAC,CAACM,MAAM,CAAC,CAACC,KAAK,EAAEL,OAAO,KAAKK,KAAK,GAAGC,UAAU,CAACN,OAAO,CAACO,KAAK,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EACpG,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BtG,cAAc,CAAC,IAAI,CAAC;IACpBrB,WAAW,CAAC;MACVC,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbC,mBAAmB,EAAE,EAAE;MACvBV,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFL,UAAU,CAAC,0BAA0B,CAAC;EACxC,CAAC;EAED,IAAIP,OAAO,EAAE;IACX,oBACEN,OAAA,CAAC7B,SAAS;MAAAkL,QAAA,eACRrJ,OAAA,CAACxB,GAAG;QAAC8K,OAAO,EAAC,MAAM;QAACC,cAAc,EAAC,QAAQ;QAACC,UAAU,EAAC,QAAQ;QAACC,SAAS,EAAC,OAAO;QAAAJ,QAAA,eAC/ErJ,OAAA,CAACjB,gBAAgB;UAAA2K,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC;EAEhB;EAEA,oBACE7J,OAAA,CAAC7B,SAAS;IAAC2L,QAAQ,EAAC,IAAI;IAAAT,QAAA,gBACtBrJ,OAAA,CAACxB,GAAG;MAACuL,EAAE,EAAE;QAAEC,EAAE,EAAE,CAAC;QAAEV,OAAO,EAAE,MAAM;QAAEC,cAAc,EAAE,eAAe;QAAEC,UAAU,EAAE;MAAS,CAAE;MAAAH,QAAA,gBACzFrJ,OAAA,CAACzB,UAAU;QAAC0L,OAAO,EAAC,IAAI;QAACC,SAAS,EAAC,IAAI;QAAAb,QAAA,GAAC,iHAEtC,EAACxG,WAAW,iBACV7C,OAAA,CAACd,IAAI;UACHiL,KAAK,EAAC,0GAAqB;UAC3BC,KAAK,EAAC,SAAS;UACfC,IAAI,EAAC,OAAO;UACZN,EAAE,EAAE;YAAEO,EAAE,EAAE;UAAE;QAAE;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CACF;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACS,CAAC,EACZhH,WAAW,iBACV7C,OAAA,CAAC1B,MAAM;QACL2L,OAAO,EAAC,UAAU;QAClBM,SAAS,eAAEvK,OAAA,CAACR,SAAS;UAAAkK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QACzBW,OAAO,EAAEpB,gBAAiB;QAAAC,QAAA,EAC3B;MAED;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAELnJ,KAAK,iBAAIV,OAAA,CAAClB,KAAK;MAAC2L,QAAQ,EAAC,OAAO;MAACV,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAAX,QAAA,EAAE3I;IAAK;MAAAgJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAC/DjJ,OAAO,iBAAIZ,OAAA,CAAClB,KAAK;MAAC2L,QAAQ,EAAC,SAAS;MAACV,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAAX,QAAA,EAAEzI;IAAO;MAAA8I,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAErEhH,WAAW,iBACV7C,OAAA,CAAChB,IAAI;MAAC+K,EAAE,EAAE;QAAEC,EAAE,EAAE,CAAC;QAAEU,OAAO,EAAE,eAAe;QAAEN,KAAK,EAAE;MAAQ,CAAE;MAAAf,QAAA,eAC5DrJ,OAAA,CAACf,WAAW;QAAAoK,QAAA,eACVrJ,OAAA,CAACxB,GAAG;UAACuL,EAAE,EAAE;YAAET,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,UAAU,EAAE;UAAS,CAAE;UAAAH,QAAA,eAClFrJ,OAAA,CAACxB,GAAG;YAAA6K,QAAA,gBACFrJ,OAAA,CAACzB,UAAU;cAAC0L,OAAO,EAAC,IAAI;cAACU,YAAY;cAAAtB,QAAA,GAAC,0FAClB,EAACxG,WAAW,CAAC+H,UAAU;YAAA;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC,eACb7J,OAAA,CAACzB,UAAU;cAAC0L,OAAO,EAAC,OAAO;cAAAZ,QAAA,GAAC,wCAClB,GAAAlJ,mBAAA,GAAC0C,WAAW,CAACmB,MAAM,cAAA7D,mBAAA,uBAAlBA,mBAAA,CAAoB4B,IAAI,EAAC,mEACtB,EAACc,WAAW,CAAC+B,YAAY,EAAC,GAAC,EAAC/B,WAAW,CAAC6B,YAAY,EAAC,yBAC5D,EAAC7B,WAAW,CAACkC,WAAW;YAAA;cAAA2E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACP,eAED7J,OAAA,CAAC5B,KAAK;MAAC2L,EAAE,EAAE;QAAEc,CAAC,EAAE;MAAE,CAAE;MAAAxB,QAAA,eAClBrJ,OAAA,CAACxB,GAAG;QAAC0L,SAAS,EAAC,MAAM;QAACY,QAAQ,EAAE7C,YAAa;QAAAoB,QAAA,eAC3CrJ,OAAA,CAACvB,IAAI;UAACsM,SAAS;UAACC,OAAO,EAAE,CAAE;UAAA3B,QAAA,gBAEzBrJ,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,gBAChBrJ,OAAA,CAACxB,GAAG;cAACuL,EAAE,EAAE;gBAAET,OAAO,EAAE,MAAM;gBAAEE,UAAU,EAAE,QAAQ;gBAAE2B,GAAG,EAAE,CAAC;gBAAEnB,EAAE,EAAE;cAAE,CAAE;cAAAX,QAAA,gBAChErJ,OAAA,CAACtB,WAAW;gBAAC0M,SAAS;gBAAA/B,QAAA,gBACpBrJ,OAAA,CAACrB,UAAU;kBAAA0K,QAAA,EAAC;gBAAQ;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACjC7J,OAAA,CAACpB,MAAM;kBACLsI,KAAK,EAAE1F,QAAQ,CAACE,SAAU;kBAC1ByI,KAAK,EAAC,wCAAU;kBAChBkB,QAAQ,EAAGnD,CAAC,IAAKlB,gBAAgB,CAAC,WAAW,EAAEkB,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;kBAAAmC,QAAA,EAE9DvI,OAAO,CAACyK,GAAG,CAAC9H,MAAM,iBACjBzD,OAAA,CAACnB,QAAQ;oBAAwBqI,KAAK,EAAEzD,MAAM,CAACiC,SAAU;oBAAA2D,QAAA,GACtD5F,MAAM,CAAC1B,IAAI,EAAC,KAAG,EAAC0B,MAAM,CAACzB,KAAK;kBAAA,GADhByB,MAAM,CAACiC,SAAS;oBAAAgE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAErB,CACX;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACd7J,OAAA,CAAC1B,MAAM;gBACL2L,OAAO,EAAC,UAAU;gBAClBO,OAAO,EAAEA,CAAA,KAAM9H,gBAAgB,CAAC,CAACD,aAAa,CAAE;gBAChD8H,SAAS,eAAEvK,OAAA,CAACZ,OAAO;kBAAAsK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAE;gBAAAR,QAAA,EACxB;cAED;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAELpH,aAAa,iBACZzC,OAAA,CAAChB,IAAI;cAACiL,OAAO,EAAC,UAAU;cAACF,EAAE,EAAE;gBAAEC,EAAE,EAAE;cAAE,CAAE;cAAAX,QAAA,eACrCrJ,OAAA,CAACf,WAAW;gBAAAoK,QAAA,gBACVrJ,OAAA,CAACzB,UAAU;kBAAC0L,OAAO,EAAC,IAAI;kBAACU,YAAY;kBAAAtB,QAAA,EAAC;gBAEtC;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb7J,OAAA,CAACvB,IAAI;kBAACsM,SAAS;kBAACC,OAAO,EAAE,CAAE;kBAAA3B,QAAA,gBACzBrJ,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,sBAAO;sBACbjD,KAAK,EAAErF,SAAS,CAACE,IAAK;sBACtBsJ,QAAQ,EAAGnD,CAAC,IAAKT,qBAAqB,CAAC,MAAM,EAAES,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;sBAC/DxG,KAAK,EAAE,CAACmB,SAAS,CAACE,IAAI,CAACkC,IAAI,CAAC,CAAE;sBAC9BwH,UAAU,EAAE,CAAC5J,SAAS,CAACE,IAAI,CAACkC,IAAI,CAAC,CAAC,GAAG,mBAAmB,GAAG;oBAAG;sBAAAyF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC/D;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,8CAAW;sBACjBjD,KAAK,EAAErF,SAAS,CAACG,KAAM;sBACvBqJ,QAAQ,EAAGnD,CAAC,IAAKT,qBAAqB,CAAC,OAAO,EAAES,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;sBAChExG,KAAK,EAAE,CAACmB,SAAS,CAACG,KAAK,CAACiC,IAAI,CAAC,CAAE;sBAC/BwH,UAAU,EAAE,CAAC5J,SAAS,CAACG,KAAK,CAACiC,IAAI,CAAC,CAAC,GAAG,mBAAmB,GAAG;oBAAG;sBAAAyF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,OAAO;sBACbuB,IAAI,EAAC,OAAO;sBACZxE,KAAK,EAAErF,SAAS,CAACI,KAAM;sBACvBoJ,QAAQ,EAAGnD,CAAC,IAAKT,qBAAqB,CAAC,OAAO,EAAES,CAAC,CAACoD,MAAM,CAACpE,KAAK;oBAAE;sBAAAwC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACjE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,gCAAO;sBACbjD,KAAK,EAAErF,SAAS,CAACK,OAAQ;sBACzBmJ,QAAQ,EAAGnD,CAAC,IAAKT,qBAAqB,CAAC,SAAS,EAAES,CAAC,CAACoD,MAAM,CAACpE,KAAK;oBAAE;sBAAAwC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACnE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAAA7B,QAAA,eAChBrJ,OAAA,CAAC1B,MAAM;sBACL2L,OAAO,EAAC,WAAW;sBACnBO,OAAO,EAAE7C,eAAgB;sBACzBgE,QAAQ,EAAE,CAAC9J,SAAS,CAACE,IAAI,CAACkC,IAAI,CAAC,CAAC,IAAI,CAACpC,SAAS,CAACG,KAAK,CAACiC,IAAI,CAAC,CAAE;sBAAAoF,QAAA,EAC7D;oBAED;sBAAAK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CACP;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC,eAGP7J,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,gBAChBrJ,OAAA,CAACxB,GAAG;cAACuL,EAAE,EAAE;gBAAET,OAAO,EAAE,MAAM;gBAAEE,UAAU,EAAE,QAAQ;gBAAE2B,GAAG,EAAE,CAAC;gBAAEnB,EAAE,EAAE;cAAE,CAAE;cAAAX,QAAA,gBAChErJ,OAAA,CAACtB,WAAW;gBAAC0M,SAAS;gBAAA/B,QAAA,gBACpBrJ,OAAA,CAACrB,UAAU;kBAAA0K,QAAA,EAAC;gBAAY;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACrC7J,OAAA,CAACpB,MAAM;kBACLsI,KAAK,EAAE1F,QAAQ,CAACG,SAAU;kBAC1BwI,KAAK,EAAC,gEAAc;kBACpBkB,QAAQ,EAAGnD,CAAC,IAAKlB,gBAAgB,CAAC,WAAW,EAAEkB,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;kBAAAmC,QAAA,EAE9DrI,OAAO,CAACuK,GAAG,CAAChH,MAAM;oBAAA,IAAAqH,aAAA,EAAAC,kBAAA;oBAAA,oBACjB7L,OAAA,CAACnB,QAAQ;sBAAwBqI,KAAK,EAAE3C,MAAM,CAACoB,SAAU;sBAAA0D,QAAA,IAAAuC,aAAA,GACtDrH,MAAM,CAACI,KAAK,cAAAiH,aAAA,uBAAZA,aAAA,CAAc7J,IAAI,EAAC,GAAC,EAACwC,MAAM,CAAChC,KAAK,EAAC,IAAE,GAAAsJ,kBAAA,GAACtH,MAAM,CAACuH,UAAU,cAAAD,kBAAA,uBAAjBA,kBAAA,CAAmB9J,IAAI,EAAC,GAChE;oBAAA,GAFewC,MAAM,CAACoB,SAAS;sBAAA+D,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAErB,CAAC;kBAAA,CACZ;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACd7J,OAAA,CAAC1B,MAAM;gBACL2L,OAAO,EAAC,UAAU;gBAClBO,OAAO,EAAEA,CAAA,KAAM5H,gBAAgB,CAAC,CAACD,aAAa,CAAE;gBAChD4H,SAAS,eAAEvK,OAAA,CAACZ,OAAO;kBAAAsK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAE;gBAAAR,QAAA,EACxB;cAED;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAELlH,aAAa,iBACZ3C,OAAA,CAAChB,IAAI;cAACiL,OAAO,EAAC,UAAU;cAACF,EAAE,EAAE;gBAAEC,EAAE,EAAE;cAAE,CAAE;cAAAX,QAAA,eACrCrJ,OAAA,CAACf,WAAW;gBAAAoK,QAAA,gBACVrJ,OAAA,CAACzB,UAAU;kBAAC0L,OAAO,EAAC,IAAI;kBAACU,YAAY;kBAAAtB,QAAA,EAAC;gBAEtC;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb7J,OAAA,CAACvB,IAAI;kBAACsM,SAAS;kBAACC,OAAO,EAAE,CAAE;kBAAA3B,QAAA,gBACzBrJ,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAACtB,WAAW;sBAAC0M,SAAS;sBAAA/B,QAAA,gBACpBrJ,OAAA,CAACrB,UAAU;wBAAA0K,QAAA,EAAC;sBAAgB;wBAAAK,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAY,CAAC,eACzC7J,OAAA,CAACpB,MAAM;wBACLsI,KAAK,EAAE/E,SAAS,CAACE,OAAQ;wBACzB8H,KAAK,EAAC,mFAAkB;wBACxBkB,QAAQ,EAAGnD,CAAC,IAAKR,qBAAqB,CAAC,SAAS,EAAEQ,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;wBAAAmC,QAAA,EAEjEjI,WAAW,CAACmK,GAAG,CAACG,IAAI,iBACnB1L,OAAA,CAACnB,QAAQ;0BAAoBqI,KAAK,EAAEwE,IAAI,CAACrJ,OAAQ;0BAAAgH,QAAA,EAC9CqC,IAAI,CAAC3J;wBAAI,GADG2J,IAAI,CAACrJ,OAAO;0BAAAqH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAEjB,CACX;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACI,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAACtB,WAAW;sBAAC0M,SAAS;sBAAA/B,QAAA,gBACpBrJ,OAAA,CAACrB,UAAU;wBAAA0K,QAAA,EAAC;sBAAO;wBAAAK,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAY,CAAC,eAChC7J,OAAA,CAACpB,MAAM;wBACLsI,KAAK,EAAE/E,SAAS,CAACG,QAAS;wBAC1B6H,KAAK,EAAC,kCAAS;wBACfkB,QAAQ,EAAGnD,CAAC,IAAKR,qBAAqB,CAAC,UAAU,EAAEQ,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;wBAAAmC,QAAA,EAElE/H,MAAM,CAACiK,GAAG,CAACnG,KAAK,iBACfpF,OAAA,CAACnB,QAAQ;0BAAsBqI,KAAK,EAAE9B,KAAK,CAAC9C,QAAS;0BAAA+G,QAAA,EAClDjE,KAAK,CAACrD;wBAAI,GADEqD,KAAK,CAAC9C,QAAQ;0BAAAoH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAEnB,CACX;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACI,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,wCAAU;sBAChBjD,KAAK,EAAE/E,SAAS,CAACI,KAAM;sBACvB8I,QAAQ,EAAGnD,CAAC,IAAKR,qBAAqB,CAAC,OAAO,EAAEQ,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;sBAChExG,KAAK,EAAE,CAACyB,SAAS,CAACI,KAAK,CAAC0B,IAAI,CAAC,CAAE;sBAC/BwH,UAAU,EAAE,CAACtJ,SAAS,CAACI,KAAK,CAAC0B,IAAI,CAAC,CAAC,GAAG,mBAAmB,GAAG;oBAAG;sBAAAyF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAACM,EAAE,EAAE,CAAE;oBAAAnC,QAAA,eACvBrJ,OAAA,CAAC3B,SAAS;sBACR+M,SAAS;sBACTjB,KAAK,EAAC,iFAAgB;sBACtBjD,KAAK,EAAE/E,SAAS,CAACK,aAAc;sBAC/B6I,QAAQ,EAAGnD,CAAC,IAAKR,qBAAqB,CAAC,eAAe,EAAEQ,CAAC,CAACoD,MAAM,CAACpE,KAAK;oBAAE;sBAAAwC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACzE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACP7J,OAAA,CAACvB,IAAI;oBAACwM,IAAI;oBAACC,EAAE,EAAE,EAAG;oBAAA7B,QAAA,eAChBrJ,OAAA,CAAC1B,MAAM;sBACL2L,OAAO,EAAC,WAAW;sBACnBO,OAAO,EAAE1C,eAAgB;sBACzB6D,QAAQ,EAAE,CAACxJ,SAAS,CAACE,OAAO,IAAI,CAACF,SAAS,CAACG,QAAQ,IAAI,CAACH,SAAS,CAACI,KAAK,CAAC0B,IAAI,CAAC,CAAE;sBAAAoF,QAAA,EAChF;oBAED;sBAAAK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CACP;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC,eAGP7J,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,eAChBrJ,OAAA,CAAC3B,SAAS;cACR+M,SAAS;cACTW,SAAS;cACTC,IAAI,EAAE,CAAE;cACR7B,KAAK,EAAC,qGAAqB;cAC3BjD,KAAK,EAAE1F,QAAQ,CAACI,mBAAoB;cACpCyJ,QAAQ,EAAGnD,CAAC,IAAKlB,gBAAgB,CAAC,qBAAqB,EAAEkB,CAAC,CAACoD,MAAM,CAACpE,KAAK,CAAE;cACzExG,KAAK,EAAE,CAACc,QAAQ,CAACI,mBAAmB,CAACqC,IAAI,CAAC,CAAE;cAC5CwH,UAAU,EAAE,CAACjK,QAAQ,CAACI,mBAAmB,CAACqC,IAAI,CAAC,CAAC,GAAG,mBAAmB,GAAG;YAAG;cAAAyF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7E;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAGP7J,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,gBAChBrJ,OAAA,CAACzB,UAAU;cAAC0L,OAAO,EAAC,IAAI;cAACU,YAAY;cAAAtB,QAAA,EAAC;YAEtC;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACb7J,OAAA,CAACvB,IAAI;cAACsM,SAAS;cAACC,OAAO,EAAE,CAAE;cAAA3B,QAAA,EACxBnI,QAAQ,CAACqK,GAAG,CAAC3C,OAAO,iBACnB5I,OAAA,CAACvB,IAAI;gBAACwM,IAAI;gBAACC,EAAE,EAAE,EAAG;gBAACM,EAAE,EAAE,CAAE;gBAACS,EAAE,EAAE,CAAE;gBAAA5C,QAAA,eAC9BrJ,OAAA,CAAChB,IAAI;kBACHiL,OAAO,EAAEzI,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,GAAG,UAAU,GAAG,UAAW;kBAClFiB,EAAE,EAAE;oBACFmC,MAAM,EAAE,SAAS;oBACjBC,MAAM,EAAE3K,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,GAAG,WAAW,GAAG,WAAW;oBAClFsD,WAAW,EAAE5K,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,GAAG,cAAc,GAAG;kBACjF,CAAE;kBACF0B,OAAO,EAAEA,CAAA,KAAMrD,mBAAmB,CAACyB,OAAO,CAACE,UAAU,CAAE;kBAAAO,QAAA,eAEvDrJ,OAAA,CAACf,WAAW;oBAAAoK,QAAA,gBACVrJ,OAAA,CAACzB,UAAU;sBAAC0L,OAAO,EAAC,WAAW;sBAACU,YAAY;sBAAAtB,QAAA,EACzCT,OAAO,CAAC7G;oBAAI;sBAAA2H,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH,CAAC,eACb7J,OAAA,CAACzB,UAAU;sBAAC0L,OAAO,EAAC,OAAO;sBAACG,KAAK,EAAC,eAAe;sBAACO,YAAY;sBAAAtB,QAAA,EAC3DT,OAAO,CAAC1D;oBAAW;sBAAAwE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACV,CAAC,eACb7J,OAAA,CAACxB,GAAG;sBAACuL,EAAE,EAAE;wBAAET,OAAO,EAAE,MAAM;wBAAEC,cAAc,EAAE,eAAe;wBAAEC,UAAU,EAAE;sBAAS,CAAE;sBAAAH,QAAA,gBAClFrJ,OAAA,CAACzB,UAAU;wBAAC0L,OAAO,EAAC,IAAI;wBAACG,KAAK,EAAC,SAAS;wBAAAf,QAAA,GACrCT,OAAO,CAACO,KAAK,EAAC,SACjB;sBAAA;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAY,CAAC,eACb7J,OAAA,CAACd,IAAI;wBACHiL,KAAK,EAAE3I,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,GAAG,SAAS,GAAG,SAAU;wBAC9EsB,KAAK,EAAE5I,QAAQ,CAACN,QAAQ,CAAC2H,QAAQ,CAACD,OAAO,CAACE,UAAU,CAAC,GAAG,SAAS,GAAG,SAAU;wBAC9EuB,IAAI,EAAC;sBAAO;wBAAAX,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACb,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACC,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACV;cAAC,GA5B6BjB,OAAO,CAACE,UAAU;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA6BlD,CACP;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAGNrI,QAAQ,CAACN,QAAQ,CAACmL,MAAM,GAAG,CAAC,iBAC3BrM,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,eAChBrJ,OAAA,CAAChB,IAAI;cAAC+K,EAAE,EAAE;gBAAEW,OAAO,EAAE,eAAe;gBAAEN,KAAK,EAAE;cAAQ,CAAE;cAAAf,QAAA,eACrDrJ,OAAA,CAACf,WAAW;gBAAAoK,QAAA,gBACVrJ,OAAA,CAACzB,UAAU;kBAAC0L,OAAO,EAAC,IAAI;kBAACU,YAAY;kBAAAtB,QAAA,EAAC;gBAEtC;kBAAAK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb7J,OAAA,CAACzB,UAAU;kBAAC0L,OAAO,EAAC,IAAI;kBAAAZ,QAAA,GACrBN,aAAa,CAAC,CAAC,EAAC,SACnB;gBAAA;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACb7J,OAAA,CAACzB,UAAU;kBAAC0L,OAAO,EAAC,OAAO;kBAAAZ,QAAA,GAAC,6EACX,EAAC7H,QAAQ,CAACN,QAAQ,CAACmL,MAAM;gBAAA;kBAAA3C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACP,eAGD7J,OAAA,CAACvB,IAAI;YAACwM,IAAI;YAACC,EAAE,EAAE,EAAG;YAAA7B,QAAA,eAChBrJ,OAAA,CAACxB,GAAG;cAACuL,EAAE,EAAE;gBAAET,OAAO,EAAE,MAAM;gBAAE6B,GAAG,EAAE,CAAC;gBAAE5B,cAAc,EAAE;cAAW,CAAE;cAAAF,QAAA,gBAC/DrJ,OAAA,CAAC1B,MAAM;gBACL2L,OAAO,EAAC,UAAU;gBAClBO,OAAO,EAAEA,CAAA,KAAMpK,QAAQ,CAAC,SAAS,CAAE;gBAAAiJ,QAAA,EACpC;cAED;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT7J,OAAA,CAAC1B,MAAM;gBACLoN,IAAI,EAAC,QAAQ;gBACbzB,OAAO,EAAC,WAAW;gBACnB0B,QAAQ,EAAEnL,UAAW;gBACrB+J,SAAS,EAAE/J,UAAU,gBAAGR,OAAA,CAACjB,gBAAgB;kBAACsL,IAAI,EAAE;gBAAG;kBAAAX,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAAG7J,OAAA,CAACV,QAAQ;kBAAAoK,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAE;gBAAAR,QAAA,EAErE7I,UAAU,GAAG,aAAa,GAAG;cAAe;gBAAAkJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB,CAAC;AAAC3J,EAAA,CAnrBID,QAAQ;EAAA,QACKR,WAAW,EACXC,WAAW;AAAA;AAAA4M,EAAA,GAFxBrM,QAAQ;AAqrBd,eAAeA,QAAQ;AAAC,IAAAqM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}